<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - ADMIN GURU SUPER APP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563eb',
                        secondary: '#1e40af',
                        accent: '#3b82f6',
                        success: '#10b981',
                        warning: '#f59e0b',
                        danger: '#ef4444',
                        sidebar: '#1e293b',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        arabic: ['Amiri', 'serif']
                    }
                }
            }
        }
    </script>
    <style>
        [dir="rtl"] { direction: rtl; text-align: right; font-family: 'Amiri', serif; }
        .sidebar-link.active { background-color: rgba(59, 130, 246, 0.2); border-right: 3px solid #3b82f6; }
        .sidebar-link:hover { background-color: rgba(255, 255, 255, 0.1); }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 40px rgba(0,0,0,0.1); }
        .gradient-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        @media print {
            .no-print { display: none !important; }
            .print-area { 
                width: 100% !important; 
                margin: 0 !important; 
                padding: 15px !important;
                box-shadow: none !important;
            }
            body { background: white !important; }
        }
        .modal-content { max-height: 90vh; overflow-y: auto; }
        .table-scroll { overflow-x: auto; }
        .premium-badge {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
    </style>
</head>
<body class="font-sans bg-gray-100 min-h-screen">

    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <aside id="sidebar" class="no-print fixed inset-y-0 left-0 z-50 w-64 bg-sidebar transform -translate-x-full md:translate-x-0 transition-transform duration-300">
            <div class="flex flex-col h-full">
                <!-- Logo -->
                <div class="flex items-center justify-center h-16 bg-sidebar border-b border-gray-700">
                    <div class="flex items-center space-x-2">
                        <div class="w-10 h-10 bg-primary rounded-lg flex items-center justify-center">
                            <i class="fas fa-chalkboard-teacher text-white text-xl"></i>
                        </div>
                        <span class="text-xl font-bold text-white">AGSA</span>
                    </div>
                </div>

                <!-- Navigation -->
                <nav class="flex-1 px-4 py-6 space-y-2 overflow-y-auto">
                    <a href="#" onclick="showSection('dashboard')" class="sidebar-link active flex items-center px-4 py-3 text-gray-300 rounded-lg transition" data-section="dashboard">
                        <i class="fas fa-home w-6"></i>
                        <span class="ml-3">Dashboard</span>
                    </a>

                    <div class="pt-4 pb-2">
                        <p class="px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider">Profil & Dasar</p>
                    </div>
                    <a href="#" onclick="showSection('profil')" class="sidebar-link flex items-center px-4 py-3 text-gray-300 rounded-lg transition" data-section="profil">
                        <i class="fas fa-user w-6"></i>
                        <span class="ml-3">Profil</span>
                    </a>
                    <a href="#" onclick="showSection('kalender')" class="sidebar-link flex items-center px-4 py-3 text-gray-300 rounded-lg transition" data-section="kalender">
                        <i class="fas fa-calendar-alt w-6"></i>
                        <span class="ml-3">Kalender Pendidikan</span>
                    </a>
                    <a href="#" onclick="showSection('jadwal')" class="sidebar-link flex items-center px-4 py-3 text-gray-300 rounded-lg transition" data-section="jadwal">
                        <i class="fas fa-clock w-6"></i>
                        <span class="ml-3">Jadwal Pelajaran</span>
                    </a>
                    <a href="#" onclick="showSection('siswa')" class="sidebar-link flex items-center px-4 py-3 text-gray-300 rounded-lg transition" data-section="siswa">
                        <i class="fas fa-users w-6"></i>
                        <span class="ml-3">Data Siswa</span>
                    </a>

                    <div class="pt-4 pb-2">
                        <p class="px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider">Dokumen</p>
                    </div>
                    <a href="#" onclick="showSection('atp')" class="sidebar-link flex items-center px-4 py-3 text-gray-300 rounded-lg transition" data-section="atp">
                        <i class="fas fa-route w-6"></i>
                        <span class="ml-3">ATP</span>
                    </a>
                    <a href="#" onclick="showSection('prota')" class="sidebar-link flex items-center px-4 py-3 text-gray-300 rounded-lg transition" data-section="prota">
                        <i class="fas fa-calendar-check w-6"></i>
                        <span class="ml-3">Prota</span>
                    </a>
                    <a href="#" onclick="showSection('promes')" class="sidebar-link flex items-center px-4 py-3 text-gray-300 rounded-lg transition" data-section="promes">
                        <i class="fas fa-list-check w-6"></i>
                        <span class="ml-3">Promes</span>
                        <span id="promesBadge" class="premium-badge ml-auto text-xs text-white px-2 py-0.5 rounded-full hidden">PRO</span>
                    </a>
                    <a href="#" onclick="showSection('modul')" class="sidebar-link flex items-center px-4 py-3 text-gray-300 rounded-lg transition" data-section="modul">
                        <i class="fas fa-book w-6"></i>
                        <span class="ml-3">Modul Ajar</span>
                        <span id="modulBadge" class="premium-badge ml-auto text-xs text-white px-2 py-0.5 rounded-full hidden">PRO</span>
                    </a>

                    <div class="pt-4 pb-2">
                        <p class="px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider">Akademik</p>
                    </div>
                    <a href="#" onclick="showSection('absensi')" class="sidebar-link flex items-center px-4 py-3 text-gray-300 rounded-lg transition" data-section="absensi">
                        <i class="fas fa-clipboard-check w-6"></i>
                        <span class="ml-3">Absensi</span>
                        <span id="absensiBadge" class="premium-badge ml-auto text-xs text-white px-2 py-0.5 rounded-full hidden">PRO</span>
                    </a>
                    <a href="#" onclick="showSection('jurnal')" class="sidebar-link flex items-center px-4 py-3 text-gray-300 rounded-lg transition" data-section="jurnal">
                        <i class="fas fa-book-open w-6"></i>
                        <span class="ml-3">Jurnal</span>
                        <span id="jurnalBadge" class="premium-badge ml-auto text-xs text-white px-2 py-0.5 rounded-full hidden">PRO</span>
                    </a>
                    <a href="#" onclick="showSection('nilai')" class="sidebar-link flex items-center px-4 py-3 text-gray-300 rounded-lg transition" data-section="nilai">
                        <i class="fas fa-chart-line w-6"></i>
                        <span class="ml-3">Daftar Nilai</span>
                        <span id="nilaiBadge" class="premium-badge ml-auto text-xs text-white px-2 py-0.5 rounded-full hidden">PRO</span>
                    </a>
                    <a href="#" onclick="showSection('lkpd')" class="sidebar-link flex items-center px-4 py-3 text-gray-300 rounded-lg transition" data-section="lkpd">
                        <i class="fas fa-file-alt w-6"></i>
                        <span class="ml-3">LKPD</span>
                        <span id="lkpdBadge" class="premium-badge ml-auto text-xs text-white px-2 py-0.5 rounded-full hidden">PRO</span>
                    </a>
                    <a href="#" onclick="showSection('banksoal')" class="sidebar-link flex items-center px-4 py-3 text-gray-300 rounded-lg transition" data-section="banksoal">
                        <i class="fas fa-database w-6"></i>
                        <span class="ml-3">Bank Soal</span>
                        <span id="banksoalBadge" class="premium-badge ml-auto text-xs text-white px-2 py-0.5 rounded-full hidden">PRO</span>
                    </a>

                    <div class="pt-4 pb-2">
                        <p class="px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider">Tools</p>
                    </div>
                    <a href="#" onclick="showSection('aiassistant')" class="sidebar-link flex items-center px-4 py-3 text-gray-300 rounded-lg transition" data-section="aiassistant">
                        <i class="fas fa-robot w-6"></i>
                        <span class="ml-3">AI Assistant</span>
                    </a>
                    <a href="#" onclick="showSection('panduan')" class="sidebar-link flex items-center px-4 py-3 text-gray-300 rounded-lg transition" data-section="panduan">
                        <i class="fas fa-question-circle w-6"></i>
                        <span class="ml-3">Panduan</span>
                    </a>

                    <!-- Super Admin Menu -->
                    <div id="adminMenu" class="hidden">
                        <div class="pt-4 pb-2">
                            <p class="px-4 text-xs font-semibold text-red-400 uppercase tracking-wider">Super Admin</p>
                        </div>
                        <a href="#" onclick="showSection('admin')" class="sidebar-link flex items-center px-4 py-3 text-gray-300 rounded-lg transition" data-section="admin">
                            <i class="fas fa-cog w-6"></i>
                            <span class="ml-3">Admin Panel</span>
                        </a>
                    </div>
                </nav>

                <!-- User Info -->
                <div class="p-4 border-t border-gray-700">
                    <div class="flex items-center">
                        <img id="userPhoto" src="https://ui-avatars.com/api/?name=User&background=3b82f6&color=fff" alt="User" class="w-10 h-10 rounded-full">
                        <div class="ml-3 flex-1 min-w-0">
                            <p id="userName" class="text-sm font-medium text-white truncate">User</p>
                            <p id="userPlan" class="text-xs text-gray-400">Free Plan</p>
                        </div>
                        <button onclick="logout()" class="text-gray-400 hover:text-white" title="Logout">
                            <i class="fas fa-sign-out-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Overlay for mobile sidebar -->
        <div id="sidebarOverlay" class="fixed inset-0 z-40 bg-black/50 hidden md:hidden" onclick="toggleSidebar()"></div>

        <!-- Main Content -->
        <div class="flex-1 md:ml-64 flex flex-col">
            <!-- Top Bar -->
            <header class="no-print bg-white shadow-sm h-16 flex items-center justify-between px-4 md:px-6">
                <div class="flex items-center">
                    <button onclick="toggleSidebar()" class="md:hidden p-2 text-gray-600 hover:text-gray-800">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                    <h1 id="pageTitle" class="text-lg md:text-xl font-semibold text-gray-800 ml-2 md:ml-0">Dashboard</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="hidden md:flex items-center space-x-2">
                        <label class="text-sm text-gray-600">Tahun:</label>
                        <select id="tahunAjaran" class="border border-gray-300 rounded-lg px-3 py-1.5 text-sm focus:ring-2 focus:ring-primary focus:border-transparent" onchange="changeTahunAjaran()">
                        </select>
                    </div>
                    <div class="hidden md:flex items-center space-x-2">
                        <label class="text-sm text-gray-600">Semester:</label>
                        <select id="semester" class="border border-gray-300 rounded-lg px-3 py-1.5 text-sm focus:ring-2 focus:ring-primary focus:border-transparent" onchange="changeSemester()">
                            <option value="Gasal">Gasal</option>
                            <option value="Genap">Genap</option>
                        </select>
                    </div>
                    <button id="upgradeBtn" onclick="showUpgradeModal()" class="hidden bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:shadow-lg transition">
                        <i class="fas fa-crown mr-2"></i>Upgrade
                    </button>
                </div>
            </header>

            <!-- Content Area -->
            <main class="flex-1 overflow-y-auto p-4 md:p-6">
                
                <!-- ==================== DASHBOARD SECTION ==================== -->
                <section id="section-dashboard" class="section-content">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white rounded-xl p-6 shadow-sm card-hover transition-all duration-300">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm">Total Kelas</p>
                                    <p id="statKelas" class="text-3xl font-bold text-gray-800 mt-1">0</p>
                                </div>
                                <div class="w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-chalkboard text-2xl text-blue-500"></i>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl p-6 shadow-sm card-hover transition-all duration-300">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm">Total Siswa</p>
                                    <p id="statSiswa" class="text-3xl font-bold text-gray-800 mt-1">0</p>
                                </div>
                                <div class="w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-users text-2xl text-green-500"></i>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl p-6 shadow-sm card-hover transition-all duration-300">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm">Modul Ajar</p>
                                    <p id="statModul" class="text-3xl font-bold text-gray-800 mt-1">0</p>
                                </div>
                                <div class="w-14 h-14 bg-purple-100 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-book text-2xl text-purple-500"></i>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl p-6 shadow-sm card-hover transition-all duration-300">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm">Bank Soal</p>
                                    <p id="statSoal" class="text-3xl font-bold text-gray-800 mt-1">0</p>
                                </div>
                                <div class="w-14 h-14 bg-orange-100 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-database text-2xl text-orange-500"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl p-6 shadow-sm mb-8">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Aksi Cepat</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <button onclick="showSection('prota')" class="flex flex-col items-center p-4 bg-blue-50 rounded-xl hover:bg-blue-100 transition">
                                <i class="fas fa-calendar-check text-2xl text-blue-500 mb-2"></i>
                                <span class="text-sm font-medium text-gray-700">Generate Prota</span>
                            </button>
                            <button onclick="showSection('promes')" class="flex flex-col items-center p-4 bg-green-50 rounded-xl hover:bg-green-100 transition">
                                <i class="fas fa-list-check text-2xl text-green-500 mb-2"></i>
                                <span class="text-sm font-medium text-gray-700">Generate Promes</span>
                            </button>
                            <button onclick="showSection('jurnal')" class="flex flex-col items-center p-4 bg-purple-50 rounded-xl hover:bg-purple-100 transition">
                                <i class="fas fa-book-open text-2xl text-purple-500 mb-2"></i>
                                <span class="text-sm font-medium text-gray-700">Input Jurnal</span>
                            </button>
                            <button onclick="showSection('absensi')" class="flex flex-col items-center p-4 bg-orange-50 rounded-xl hover:bg-orange-100 transition">
                                <i class="fas fa-clipboard-check text-2xl text-orange-500 mb-2"></i>
                                <span class="text-sm font-medium text-gray-700">Input Absensi</span>
                            </button>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl p-6 shadow-sm">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Status Kelengkapan Administrasi</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <div class="flex items-center">
                                    <div id="statusProfil" class="w-3 h-3 bg-red-500 rounded-full mr-3"></div>
                                    <span class="text-gray-700">Profil Guru</span>
                                </div>
                                <button onclick="showSection('profil')" class="text-primary hover:underline text-sm">Lengkapi</button>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <div class="flex items-center">
                                    <div id="statusKalender" class="w-3 h-3 bg-red-500 rounded-full mr-3"></div>
                                    <span class="text-gray-700">Kalender Pendidikan</span>
                                </div>
                                <button onclick="showSection('kalender')" class="text-primary hover:underline text-sm">Setup</button>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <div class="flex items-center">
                                    <div id="statusJadwal" class="w-3 h-3 bg-red-500 rounded-full mr-3"></div>
                                    <span class="text-gray-700">Jadwal Pelajaran</span>
                                </div>
                                <button onclick="showSection('jadwal')" class="text-primary hover:underline text-sm">Setup</button>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <div class="flex items-center">
                                    <div id="statusATP" class="w-3 h-3 bg-red-500 rounded-full mr-3"></div>
                                    <span class="text-gray-700">ATP (Alur Tujuan Pembelajaran)</span>
                                </div>
                                <button onclick="showSection('atp')" class="text-primary hover:underline text-sm">Setup</button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ==================== PROFIL SECTION ==================== -->
                <section id="section-profil" class="section-content hidden">
                    <div class="bg-white rounded-xl shadow-sm">
                        <div class="p-6 border-b border-gray-200">
                            <h2 class="text-xl font-semibold text-gray-800">Profil Guru & Satuan Pendidikan</h2>
                            <p class="text-gray-600 text-sm mt-1">Lengkapi data profil untuk dokumen administrasi</p>
                        </div>
                        <div class="p-6">
                            <form id="formProfil" onsubmit="saveProfil(event)">
                                <div class="grid md:grid-cols-2 gap-6">
                                    <div class="space-y-4">
                                        <h3 class="font-semibold text-gray-800 pb-2 border-b">Data Guru</h3>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Nama Lengkap</label>
                                            <input type="text" id="namaGuru" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="Nama lengkap beserta gelar">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">NIP</label>
                                            <input type="text" id="nipGuru" class="w-full border border-gray-300 rounded-lg px-4 py-2" placeholder="NIP atau NUPTK">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                            <input type="email" id="emailGuru" class="w-full border border-gray-300 rounded-lg px-4 py-2 bg-gray-100" readonly>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">No. HP / WhatsApp</label>
                                            <input type="tel" id="hpGuru" class="w-full border border-gray-300 rounded-lg px-4 py-2" placeholder="08xxxxxxxxxx">
                                        </div>
                                    </div>
                                    <div class="space-y-4">
                                        <h3 class="font-semibold text-gray-800 pb-2 border-b">Data Satuan Pendidikan</h3>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Nama Sekolah</label>
                                            <input type="text" id="namaSekolah" class="w-full border border-gray-300 rounded-lg px-4 py-2" placeholder="Nama lengkap sekolah">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Jenjang</label>
                                            <select id="jenjang" class="w-full border border-gray-300 rounded-lg px-4 py-2">
                                                <option value="">Pilih Jenjang</option>
                                                <option value="SD">SD / MI</option>
                                                <option value="SMP">SMP / MTs</option>
                                                <option value="SMA">SMA / MA / SMK</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Kota/Kabupaten</label>
                                            <input type="text" id="kotaSekolah" class="w-full border border-gray-300 rounded-lg px-4 py-2" placeholder="Contoh: Bandung">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Alamat</label>
                                            <textarea id="alamatSekolah" rows="2" class="w-full border border-gray-300 rounded-lg px-4 py-2" placeholder="Alamat sekolah"></textarea>
                                        </div>
                                    </div>
                                    <div class="space-y-4">
                                        <h3 class="font-semibold text-gray-800 pb-2 border-b">Data Kepala Sekolah</h3>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Nama Kepala Sekolah</label>
                                            <input type="text" id="namaKepsek" class="w-full border border-gray-300 rounded-lg px-4 py-2" placeholder="Nama lengkap">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">NIP Kepala Sekolah</label>
                                            <input type="text" id="nipKepsek" class="w-full border border-gray-300 rounded-lg px-4 py-2" placeholder="NIP">
                                        </div>
                                    </div>
                                    <div class="space-y-4">
                                        <h3 class="font-semibold text-gray-800 pb-2 border-b">Mata Pelajaran</h3>
                                        <div id="mataPelajaranContainer"></div>
                                        <button type="button" onclick="tambahMapel()" class="text-primary hover:underline text-sm">
                                            <i class="fas fa-plus mr-1"></i>Tambah Mata Pelajaran
                                        </button>
                                    </div>
                                </div>
                                <div class="mt-8 flex justify-end">
                                    <button type="submit" class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-secondary transition">
                                        <i class="fas fa-save mr-2"></i>Simpan Profil
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </section>

                <!-- ==================== KALENDER SECTION ==================== -->
                <section id="section-kalender" class="section-content hidden">
                    <div class="bg-white rounded-xl shadow-sm">
                        <div class="p-6 border-b border-gray-200">
                            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                                <div>
                                    <h2 class="text-xl font-semibold text-gray-800">Kalender Pendidikan</h2>
                                    <p class="text-gray-600 text-sm mt-1">Hari libur nasional otomatis terisi</p>
                                </div>
                                <div class="flex gap-2">
                                    <button onclick="showImportKalender()" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition text-sm">
                                        <i class="fas fa-file-import mr-2"></i>Import CSV
                                    </button>
                                    <button onclick="tambahKegiatan()" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition text-sm">
                                        <i class="fas fa-plus mr-2"></i>Tambah Kegiatan
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="grid md:grid-cols-2 gap-6 mb-8">
                                <div class="bg-blue-50 rounded-xl p-4">
                                    <h3 class="font-semibold text-gray-800 mb-4"><i class="fas fa-calendar-alt mr-2 text-blue-500"></i>Semester Gasal</h3>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Mulai</label>
                                            <input type="date" id="gasalMulai" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="saveKalenderSettings()">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Selesai</label>
                                            <input type="date" id="gasalSelesai" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="saveKalenderSettings()">
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-green-50 rounded-xl p-4">
                                    <h3 class="font-semibold text-gray-800 mb-4"><i class="fas fa-calendar-alt mr-2 text-green-500"></i>Semester Genap</h3>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Mulai</label>
                                            <input type="date" id="genapMulai" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="saveKalenderSettings()">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Selesai</label>
                                            <input type="date" id="genapSelesai" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="saveKalenderSettings()">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
                                <p class="text-yellow-800 text-sm"><i class="fas fa-info-circle mr-2"></i>
                                    <strong>Info:</strong> Hari libur nasional (Tahun Baru, Kemerdekaan RI, Idul Fitri, dll) otomatis terisi.
                                </p>
                            </div>
                            <h3 class="font-semibold text-gray-800 mb-4">Daftar Kegiatan & Libur</h3>
                            <div class="table-scroll">
                                <table class="w-full">
                                    <thead>
                                        <tr class="bg-gray-50">
                                            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">Kegiatan</th>
                                            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">Jenis</th>
                                            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">Mulai</th>
                                            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">Selesai</th>
                                            <th class="px-4 py-3 text-center text-sm font-semibold text-gray-600">Aksi</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tableKalender"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ==================== JADWAL SECTION ==================== -->
                <section id="section-jadwal" class="section-content hidden">
                    <div class="bg-white rounded-xl shadow-sm">
                        <div class="p-6 border-b border-gray-200">
                            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                                <div>
                                    <h2 class="text-xl font-semibold text-gray-800">Jadwal Pelajaran</h2>
                                    <p class="text-gray-600 text-sm mt-1">Validasi anti-bentrok otomatis</p>
                                </div>
                                <button onclick="tambahJadwal()" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition text-sm">
                                    <i class="fas fa-plus mr-2"></i>Tambah Jadwal
                                </button>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="mb-8 bg-gray-50 rounded-xl p-4">
                                <h3 class="font-semibold text-gray-800 mb-4"><i class="fas fa-clock mr-2 text-primary"></i>Pengaturan Jam</h3>
                                <div class="grid md:grid-cols-3 gap-4 mb-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Durasi JP (menit)</label>
                                        <input type="number" id="durasiJP" value="35" min="25" max="60" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="generateJamPelajaran()">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Jam Mulai</label>
                                        <input type="time" id="jamMulai" value="07:00" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="generateJamPelajaran()">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Jumlah JP/Hari</label>
                                        <input type="number" id="jumlahJPHari" value="8" min="4" max="12" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="generateJamPelajaran()">
                                    </div>
                                </div>
                                <div id="daftarJamPelajaran" class="grid grid-cols-2 md:grid-cols-4 gap-2"></div>
                            </div>
                            <h3 class="font-semibold text-gray-800 mb-4">Jadwal Mengajar</h3>
                            <div class="table-scroll">
                                <table class="w-full border-collapse">
                                    <thead>
                                        <tr class="bg-primary text-white">
                                            <th class="px-4 py-3 text-left text-sm font-semibold">Jam</th>
                                            <th class="px-4 py-3 text-center text-sm font-semibold">Senin</th>
                                            <th class="px-4 py-3 text-center text-sm font-semibold">Selasa</th>
                                            <th class="px-4 py-3 text-center text-sm font-semibold">Rabu</th>
                                            <th class="px-4 py-3 text-center text-sm font-semibold">Kamis</th>
                                            <th class="px-4 py-3 text-center text-sm font-semibold">Jum'at</th>
                                            <th class="px-4 py-3 text-center text-sm font-semibold">Sabtu</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tableJadwal"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ==================== SISWA SECTION ==================== -->
                <section id="section-siswa" class="section-content hidden">
                    <div class="bg-white rounded-xl shadow-sm">
                        <div class="p-6 border-b border-gray-200">
                            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                                <div>
                                    <h2 class="text-xl font-semibold text-gray-800">Data Siswa</h2>
                                    <p class="text-gray-600 text-sm mt-1">Import via Google Spreadsheet</p>
                                </div>
                                <div class="flex gap-2">
                                    <button onclick="showImportSiswa()" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition text-sm">
                                        <i class="fas fa-file-import mr-2"></i>Import CSV
                                    </button>
                                    <button onclick="tambahSiswa()" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition text-sm">
                                        <i class="fas fa-plus mr-2"></i>Tambah Siswa
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="flex flex-wrap gap-4 mb-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Kelas</label>
                                    <select id="filterKelas" class="border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="filterSiswa()">
                                        <option value="">Semua</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Rombel</label>
                                    <select id="filterRombel" class="border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="filterSiswa()">
                                        <option value="">Semua</option>
                                    </select>
                                </div>
                                <div class="flex-1 min-w-[200px]">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Cari</label>
                                    <input type="text" id="searchSiswa" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" placeholder="Cari nama/NISN..." oninput="filterSiswa()">
                                </div>
                            </div>
                            <div class="table-scroll">
                                <table class="w-full">
                                    <thead>
                                        <tr class="bg-gray-50">
                                            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">No</th>
                                            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">NISN</th>
                                            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">Nama</th>
                                            <th class="px-4 py-3 text-center text-sm font-semibold text-gray-600">L/P</th>
                                            <th class="px-4 py-3 text-center text-sm font-semibold text-gray-600">Kelas</th>
                                            <th class="px-4 py-3 text-center text-sm font-semibold text-gray-600">Rombel</th>
                                            <th class="px-4 py-3 text-center text-sm font-semibold text-gray-600">Aksi</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tableSiswa"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ==================== ATP SECTION ==================== -->
                <section id="section-atp" class="section-content hidden">
                    <div class="bg-white rounded-xl shadow-sm mb-6 no-print">
                        <div class="p-6 border-b border-gray-200">
                            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                                <div>
                                    <h2 class="text-xl font-semibold text-gray-800">ATP - Alur Tujuan Pembelajaran</h2>
                                    <p class="text-gray-600 text-sm mt-1">Load CP PAI atau input manual</p>
                                </div>
                                <div class="flex gap-2">
                                    <button onclick="printATP()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition text-sm">
                                        <i class="fas fa-print mr-2"></i>Cetak
                                    </button>
                                    <button onclick="loadCPDefault()" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition text-sm">
                                        <i class="fas fa-database mr-2"></i>Load CP PAI
                                    </button>
                                    <button onclick="tambahTP()" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition text-sm">
                                        <i class="fas fa-plus mr-2"></i>Tambah TP
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="flex flex-wrap gap-4 mb-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Fase</label>
                                    <select id="filterFase" class="border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="filterATP()">
                                        <option value="">Semua Fase</option>
                                        <option value="A">Fase A (Kelas 1-2)</option>
                                        <option value="B">Fase B (Kelas 3-4)</option>
                                        <option value="C">Fase C (Kelas 5-6)</option>
                                        <option value="D">Fase D (Kelas 7-9)</option>
                                        <option value="E">Fase E (Kelas 10)</option>
                                        <option value="F">Fase F (Kelas 11-12)</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Mata Pelajaran</label>
                                    <select id="filterMapelATP" class="border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="filterATP()">
                                        <option value="">Semua Mapel</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="atpContainer" class="space-y-4"></div>
                    <div id="atpPrintArea" class="hidden print-area bg-white rounded-xl shadow-sm p-8" style="font-family: 'Times New Roman', serif;"></div>
                </section>

                <!-- ==================== PROTA SECTION ==================== -->
                <section id="section-prota" class="section-content hidden">
                    <div class="bg-white rounded-xl shadow-sm mb-6 no-print">
                        <div class="p-6 border-b border-gray-200">
                            <h2 class="text-xl font-semibold text-gray-800">Program Tahunan (PROTA)</h2>
                        </div>
                        <div class="p-6">
                            <div class="grid md:grid-cols-4 gap-4 mb-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Kelas</label>
                                    <select id="protaKelas" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="generateProta()">
                                        <option value="1">Kelas I</option>
                                        <option value="2">Kelas II</option>
                                        <option value="3" selected>Kelas III</option>
                                        <option value="4">Kelas IV</option>
                                        <option value="5">Kelas V</option>
                                        <option value="6">Kelas VI</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Rombel</label>
                                    <input type="text" id="protaRombel" value="A" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" oninput="generateProta()">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Hari Mengajar</label>
                                    <select id="protaHari" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="generateProta()">
                                        <option value="1">Senin</option>
                                        <option value="2">Selasa</option>
                                        <option value="3">Rabu</option>
                                        <option value="4">Kamis</option>
                                        <option value="5">Jum'at</option>
                                        <option value="6">Sabtu</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">JP/Pertemuan</label>
                                    <input type="number" id="protaJP" value="4" min="1" max="8" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="generateProta()">
                                </div>
                            </div>
                            <button onclick="window.print()" class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-secondary transition">
                                <i class="fas fa-print mr-2"></i>Cetak PDF
                            </button>
                        </div>
                    </div>
                    <div id="protaPrintArea" class="print-area bg-white rounded-xl shadow-sm p-8" style="font-family: 'Times New Roman', serif;"></div>
                </section>

                <!-- ==================== PROMES SECTION ==================== -->
                <section id="section-promes" class="section-content hidden">
                    <div class="bg-white rounded-xl shadow-sm mb-6 no-print">
                        <div class="p-6 border-b border-gray-200">
                            <h2 class="text-xl font-semibold text-gray-800">Program Semester (PROMES)</h2>
                        </div>
                        <div class="p-6">
                            <div class="grid md:grid-cols-5 gap-4 mb-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Kelas</label>
                                    <select id="promesKelas" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="generatePromes()">
                                        <option value="1">Kelas I</option>
                                        <option value="2">Kelas II</option>
                                        <option value="3" selected>Kelas III</option>
                                        <option value="4">Kelas IV</option>
                                        <option value="5">Kelas V</option>
                                        <option value="6">Kelas VI</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Rombel</label>
                                    <input type="text" id="promesRombel" value="A" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" oninput="generatePromes()">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Semester</label>
                                    <select id="promesSemester" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="generatePromes()">
                                        <option value="Gasal">Gasal</option>
                                        <option value="Genap">Genap</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Hari Mengajar</label>
                                    <select id="promesHari" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="generatePromes()">
                                        <option value="1">Senin</option>
                                        <option value="2">Selasa</option>
                                        <option value="3">Rabu</option>
                                        <option value="4">Kamis</option>
                                        <option value="5">Jum'at</option>
                                        <option value="6">Sabtu</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">JP/Pertemuan</label>
                                    <input type="number" id="promesJP" value="4" min="1" max="8" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="generatePromes()">
                                </div>
                            </div>
                            <button onclick="window.print()" class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-secondary transition">
                                <i class="fas fa-print mr-2"></i>Cetak PDF
                            </button>
                        </div>
                    </div>
                    <div id="promesPrintArea" class="print-area bg-white rounded-xl shadow-sm p-8 overflow-x-auto" style="font-family: 'Times New Roman', serif;"></div>
                </section>

                <!-- ==================== MODUL AJAR SECTION ==================== -->
                <section id="section-modul" class="section-content hidden">
                    <div class="bg-white rounded-xl shadow-sm p-6 mb-6 no-print">
                        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                            <div>
                                <h2 class="text-xl font-semibold text-gray-800">Modul Ajar</h2>
                                <p class="text-gray-600 text-sm mt-1">Terintegrasi dengan 8 Dimensi Profil Lulusan</p>
                            </div>
                            <button onclick="tambahModulAjar()" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition text-sm">
                                <i class="fas fa-plus mr-2"></i>Buat Modul Ajar
                            </button>
                        </div>
                    </div>
                    <div id="modulAjarList" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
                </section>

                <!-- ==================== ABSENSI SECTION ==================== -->
                <section id="section-absensi" class="section-content hidden">
                    <div class="bg-white rounded-xl shadow-sm">
                        <div class="p-6 border-b border-gray-200">
                            <h2 class="text-xl font-semibold text-gray-800">Absensi Siswa</h2>
                            <p class="text-gray-600 text-sm mt-1">Otomatis sinkron dengan Jurnal</p>
                        </div>
                        <div class="p-6">
                            <div class="grid md:grid-cols-4 gap-4 mb-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Tanggal</label>
                                    <input type="date" id="absensiTanggal" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Kelas</label>
                                    <select id="absensiKelas" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="loadAbsensiRombel()">
                                        <option value="">Pilih Kelas</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Rombel</label>
                                    <select id="absensiRombel" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="loadAbsensiSiswa()">
                                        <option value="">Pilih Rombel</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Jam Ke</label>
                                    <select id="absensiJam" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm">
                                        <option value="1-2">Jam 1-2</option>
                                        <option value="3-4">Jam 3-4</option>
                                        <option value="5-6">Jam 5-6</option>
                                        <option value="7-8">Jam 7-8</option>
                                    </select>
                                </div>
                            </div>
                            <div class="table-scroll">
                                <table class="w-full">
                                    <thead>
                                        <tr class="bg-gray-50">
                                            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">No</th>
                                            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">Nama</th>
                                            <th class="px-4 py-3 text-center text-sm font-semibold text-gray-600">H</th>
                                            <th class="px-4 py-3 text-center text-sm font-semibold text-gray-600">I</th>
                                            <th class="px-4 py-3 text-center text-sm font-semibold text-gray-600">S</th>
                                            <th class="px-4 py-3 text-center text-sm font-semibold text-gray-600">A</th>
                                            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">Ket</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tableAbsensi">
                                        <tr><td colspan="7" class="px-4 py-8 text-center text-gray-500">Pilih kelas dan rombel</td></tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="mt-6 flex justify-end">
                                <button onclick="saveAbsensi()" class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-secondary transition">
                                    <i class="fas fa-save mr-2"></i>Simpan Absensi
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ==================== JURNAL SECTION ==================== -->
                <section id="section-jurnal" class="section-content hidden">
                    <div class="bg-white rounded-xl shadow-sm">
                        <div class="p-6 border-b border-gray-200">
                            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                                <div>
                                    <h2 class="text-xl font-semibold text-gray-800">Jurnal Pembelajaran</h2>
                                    <p class="text-gray-600 text-sm mt-1">Sinkron dengan Promes</p>
                                </div>
                                <div class="flex gap-2">
                                    <button onclick="tambahJurnal()" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition text-sm">
                                        <i class="fas fa-plus mr-2"></i>Tambah Jurnal
                                    </button>
                                    <button onclick="printJurnal()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition text-sm">
                                        <i class="fas fa-print mr-2"></i>Cetak
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="grid md:grid-cols-3 gap-4 mb-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Kelas</label>
                                    <select id="jurnalKelas" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="loadJurnal()">
                                        <option value="">Semua Kelas</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Bulan</label>
                                    <select id="jurnalBulan" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="loadJurnal()">
                                        <option value="">Semua</option>
                                        <option value="1">Januari</option>
                                        <option value="2">Februari</option>
                                        <option value="3">Maret</option>
                                        <option value="4">April</option>
                                        <option value="5">Mei</option>
                                        <option value="6">Juni</option>
                                        <option value="7">Juli</option>
                                        <option value="8">Agustus</option>
                                        <option value="9">September</option>
                                        <option value="10">Oktober</option>
                                        <option value="11">November</option>
                                        <option value="12">Desember</option>
                                    </select>
                                </div>
                            </div>
                            <div class="table-scroll">
                                <table class="w-full">
                                    <thead>
                                        <tr class="bg-gray-50">
                                            <th class="px-3 py-3 text-left text-sm font-semibold text-gray-600">No</th>
                                            <th class="px-3 py-3 text-left text-sm font-semibold text-gray-600">Kelas</th>
                                            <th class="px-3 py-3 text-left text-sm font-semibold text-gray-600">Materi</th>
                                            <th class="px-3 py-3 text-left text-sm font-semibold text-gray-600">TP</th>
                                            <th class="px-3 py-3 text-center text-sm font-semibold text-gray-600">Kehadiran</th>
                                            <th class="px-3 py-3 text-left text-sm font-semibold text-gray-600">Tanggal</th>
                                            <th class="px-3 py-3 text-left text-sm font-semibold text-gray-600">Hasil</th>
                                            <th class="px-3 py-3 text-center text-sm font-semibold text-gray-600">Aksi</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tableJurnal">
                                        <tr><td colspan="8" class="px-4 py-8 text-center text-gray-500">Belum ada data jurnal</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ==================== NILAI SECTION ==================== -->
                <section id="section-nilai" class="section-content hidden">
                    <div class="bg-white rounded-xl shadow-sm">
                        <div class="p-6 border-b border-gray-200">
                            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                                <div>
                                    <h2 class="text-xl font-semibold text-gray-800">Daftar Nilai</h2>
                                    <p class="text-gray-600 text-sm mt-1">PH, PTS, PAS, dan Nilai Rapor</p>
                                </div>
                                <button onclick="settingKomponen()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition text-sm">
                                    <i class="fas fa-cog mr-2"></i>Setting Komponen
                                </button>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="grid md:grid-cols-3 gap-4 mb-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Kelas</label>
                                    <select id="nilaiKelas" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="loadNilaiRombel()">
                                        <option value="">Pilih Kelas</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Rombel</label>
                                    <select id="nilaiRombel" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="loadNilai()">
                                        <option value="">Pilih Rombel</option>
                                    </select>
                                </div>
                            </div>
                            <div class="table-scroll">
                                <table class="w-full text-sm">
                                    <thead>
                                        <tr class="bg-gray-50">
                                            <th class="px-3 py-3 text-left font-semibold text-gray-600">No</th>
                                            <th class="px-3 py-3 text-left font-semibold text-gray-600">Nama</th>
                                            <th class="px-3 py-3 text-center font-semibold text-gray-600">PH1</th>
                                            <th class="px-3 py-3 text-center font-semibold text-gray-600">PH2</th>
                                            <th class="px-3 py-3 text-center font-semibold text-gray-600">PH3</th>
                                            <th class="px-3 py-3 text-center font-semibold text-gray-600">PTS</th>
                                            <th class="px-3 py-3 text-center font-semibold text-gray-600">PAS</th>
                                            <th class="px-3 py-3 text-center font-semibold text-gray-600 bg-primary text-white">NR</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tableNilai">
                                        <tr><td colspan="8" class="px-4 py-8 text-center text-gray-500">Pilih kelas dan rombel</td></tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="mt-6 flex justify-end">
                                <button onclick="saveNilai()" class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-secondary transition">
                                    <i class="fas fa-save mr-2"></i>Simpan Nilai
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ==================== LKPD SECTION ==================== -->
                <section id="section-lkpd" class="section-content hidden">
                    <div class="bg-white rounded-xl shadow-sm p-6 mb-6 no-print">
                        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                            <div>
                                <h2 class="text-xl font-semibold text-gray-800">LKPD</h2>
                                <p class="text-gray-600 text-sm mt-1">Support teks Arab (RTL)</p>
                            </div>
                            <button onclick="tambahLKPD()" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition text-sm">
                                <i class="fas fa-plus mr-2"></i>Buat LKPD
                            </button>
                        </div>
                    </div>
                    <div id="lkpdList" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
                </section>

                <!-- ==================== BANK SOAL SECTION ==================== -->
                <section id="section-banksoal" class="section-content hidden">
                    <div class="bg-white rounded-xl shadow-sm">
                        <div class="p-6 border-b border-gray-200">
                            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                                <div>
                                    <h2 class="text-xl font-semibold text-gray-800">Bank Soal</h2>
                                    <p class="text-gray-600 text-sm mt-1">Terintegrasi ATP, support teks Arab</p>
                                </div>
                                <button onclick="tambahSoal()" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition text-sm">
                                    <i class="fas fa-plus mr-2"></i>Tambah Soal
                                </button>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="grid md:grid-cols-3 gap-4 mb-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Fase</label>
                                    <select id="soalFase" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="renderBankSoalList()">
                                        <option value="">Semua</option>
                                        <option value="A">Fase A</option>
                                        <option value="B">Fase B</option>
                                        <option value="C">Fase C</option>
                                        <option value="D">Fase D</option>
                                        <option value="E">Fase E</option>
                                        <option value="F">Fase F</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Tipe</label>
                                    <select id="soalTipe" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" onchange="renderBankSoalList()">
                                        <option value="">Semua</option>
                                        <option value="pilgan">Pilihan Ganda</option>
                                        <option value="essay">Essay</option>
                                        <option value="isian">Isian Singkat</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Cari</label>
                                    <input type="text" id="soalSearch" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" placeholder="Cari..." oninput="renderBankSoalList()">
                                </div>
                            </div>
                            <div id="bankSoalList" class="space-y-4"></div>
                        </div>
                    </div>
                </section>

                <!-- ==================== AI ASSISTANT SECTION ==================== -->
                <section id="section-aiassistant" class="section-content hidden">
                    <div class="bg-white rounded-xl shadow-sm">
                        <div class="p-6 border-b border-gray-200">
                            <h2 class="text-xl font-semibold text-gray-800">AI Assistant</h2>
                            <p class="text-gray-600 text-sm mt-1">Dapatkan prompt untuk konversi data ke CSV</p>
                        </div>
                        <div class="p-6">
                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <h3 class="font-semibold text-gray-800 mb-4">Pilih Jenis Data</h3>
                                    <div class="space-y-3">
                                        <button onclick="showAIPrompt('siswa')" class="w-full text-left p-4 border rounded-lg hover:bg-gray-50 transition">
                                            <i class="fas fa-users text-blue-500 mr-3"></i>
                                            <span class="font-medium">Data Siswa</span>
                                            <p class="text-sm text-gray-500 mt-1">Konversi daftar siswa ke format CSV</p>
                                        </button>
                                        <button onclick="showAIPrompt('kalender')" class="w-full text-left p-4 border rounded-lg hover:bg-gray-50 transition">
                                            <i class="fas fa-calendar text-green-500 mr-3"></i>
                                            <span class="font-medium">Kalender Pendidikan</span>
                                            <p class="text-sm text-gray-500 mt-1">Konversi jadwal kegiatan ke format CSV</p>
                                        </button>
                                        <button onclick="showAIPrompt('cp')" class="w-full text-left p-4 border rounded-lg hover:bg-gray-50 transition">
                                            <i class="fas fa-book text-purple-500 mr-3"></i>
                                            <span class="font-medium">Capaian Pembelajaran</span>
                                            <p class="text-sm text-gray-500 mt-1">Konversi CP/TP ke format CSV</p>
                                        </button>
                                        <button onclick="showAIPrompt('soal')" class="w-full text-left p-4 border rounded-lg hover:bg-gray-50 transition">
                                            <i class="fas fa-question-circle text-orange-500 mr-3"></i>
                                            <span class="font-medium">Bank Soal</span>
                                            <p class="text-sm text-gray-500 mt-1">Konversi soal ke format CSV</p>
                                        </button>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-gray-800 mb-4">Prompt untuk AI</h3>
                                    <div id="aiPromptArea" class="bg-gray-50 rounded-lg p-4 min-h-[300px]">
                                        <p class="text-gray-500 text-center py-8">Pilih jenis data untuk mendapatkan prompt</p>
                                    </div>
                                    <button onclick="copyPrompt()" class="mt-4 bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition text-sm">
                                        <i class="fas fa-copy mr-2"></i>Salin Prompt
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ==================== PANDUAN SECTION ==================== -->
                <section id="section-panduan" class="section-content hidden">
                    <div class="bg-white rounded-xl shadow-sm">
                        <div class="p-6 border-b border-gray-200">
                            <h2 class="text-xl font-semibold text-gray-800">Panduan Penggunaan Aplikasi</h2>
                        </div>
                        <div class="p-6">
                            <div class="space-y-6">
                                <div class="border rounded-lg overflow-hidden">
                                    <button onclick="toggleGuide('guide1')" class="w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 transition">
                                        <span class="font-semibold text-gray-800"><i class="fas fa-1 text-primary mr-3"></i>Lengkapi Profil</span>
                                        <i class="fas fa-chevron-down text-gray-400"></i>
                                    </button>
                                    <div id="guide1" class="hidden p-4 border-t">
                                        <ol class="list-decimal list-inside space-y-2 text-gray-600">
                                            <li>Buka menu <strong>Profil</strong> di sidebar</li>
                                            <li>Isi data guru (nama, NIP, dll)</li>
                                            <li>Isi data satuan pendidikan dan kepala sekolah</li>
                                            <li>Tambahkan mata pelajaran dengan jumlah JP per minggu</li>
                                            <li>Klik <strong>Simpan Profil</strong></li>
                                        </ol>
                                    </div>
                                </div>
                                <div class="border rounded-lg overflow-hidden">
                                    <button onclick="toggleGuide('guide2')" class="w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 transition">
                                        <span class="font-semibold text-gray-800"><i class="fas fa-2 text-primary mr-3"></i>Setup Kalender & Jadwal</span>
                                        <i class="fas fa-chevron-down text-gray-400"></i>
                                    </button>
                                    <div id="guide2" class="hidden p-4 border-t">
                                        <ol class="list-decimal list-inside space-y-2 text-gray-600">
                                            <li>Buka <strong>Kalender Pendidikan</strong> untuk set tanggal semester</li>
                                            <li>Hari libur nasional sudah otomatis terisi</li>
                                            <li>Tambahkan kegiatan sekolah seperti ujian, libur, dll</li>
                                            <li>Buka <strong>Jadwal Pelajaran</strong> untuk mengatur jadwal mengajar</li>
                                        </ol>
                                    </div>
                                </div>
                                <div class="border rounded-lg overflow-hidden">
                                    <button onclick="toggleGuide('guide3')" class="w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 transition">
                                        <span class="font-semibold text-gray-800"><i class="fas fa-3 text-primary mr-3"></i>Import Data Siswa</span>
                                        <i class="fas fa-chevron-down text-gray-400"></i>
                                    </button>
                                    <div id="guide3" class="hidden p-4 border-t">
                                        <ol class="list-decimal list-inside space-y-2 text-gray-600">
                                            <li>Siapkan data siswa di Google Spreadsheet</li>
                                            <li>Format kolom: <code>nisn, nama, jenis_kelamin, kelas, rombel</code></li>
                                            <li>Publish spreadsheet: File > Share > Publish to web > CSV</li>
                                            <li>Copy link dan paste di menu Import CSV</li>
                                        </ol>
                                    </div>
                                </div>
                                <div class="border rounded-lg overflow-hidden">
                                    <button onclick="toggleGuide('guide4')" class="w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 transition">
                                        <span class="font-semibold text-gray-800"><i class="fas fa-4 text-primary mr-3"></i>Generate Dokumen</span>
                                        <i class="fas fa-chevron-down text-gray-400"></i>
                                    </button>
                                    <div id="guide4" class="hidden p-4 border-t">
                                        <ol class="list-decimal list-inside space-y-2 text-gray-600">
                                            <li>Load CP PAI di menu <strong>ATP</strong> atau input manual</li>
                                            <li>Generate <strong>Prota</strong> dan <strong>Promes</strong></li>
                                            <li>Semua dokumen saling sinkron</li>
                                            <li>Klik <strong>Cetak PDF</strong> untuk menyimpan</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ==================== ADMIN SECTION ==================== -->
                <section id="section-admin" class="section-content hidden">
                    <div class="bg-white rounded-xl shadow-sm">
                        <div class="p-6 border-b border-gray-200">
                            <h2 class="text-xl font-semibold text-gray-800">Panel Super Admin</h2>
                        </div>
                        <div class="p-6">
                            <div class="grid md:grid-cols-2 gap-6 mb-8">
                                <div class="border rounded-xl p-4">
                                    <h3 class="font-semibold text-gray-800 mb-4"><i class="fas fa-cog mr-2"></i>Pengaturan</h3>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Nomor WA Upgrade</label>
                                            <input type="tel" id="adminWA" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm" placeholder="6281234567890">
                                        </div>
                                        <button onclick="saveAdminSettings()" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition text-sm">
                                            <i class="fas fa-save mr-2"></i>Simpan
                                        </button>
                                    </div>
                                </div>
                                <div class="border rounded-xl p-4">
                                    <h3 class="font-semibold text-gray-800 mb-4"><i class="fas fa-chart-bar mr-2"></i>Statistik</h3>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div class="bg-blue-50 rounded-lg p-3 text-center">
                                            <p id="adminStatUsers" class="text-2xl font-bold text-blue-600">0</p>
                                            <p class="text-sm text-gray-600">Total Users</p>
                                        </div>
                                        <div class="bg-green-50 rounded-lg p-3 text-center">
                                            <p id="adminStatPremium" class="text-2xl font-bold text-green-600">0</p>
                                            <p class="text-sm text-gray-600">Premium</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <h3 class="font-semibold text-gray-800 mb-4">Manajemen User</h3>
                            <div class="table-scroll">
                                <table class="w-full">
                                    <thead>
                                        <tr class="bg-gray-50">
                                            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">Email</th>
                                            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">Nama</th>
                                            <th class="px-4 py-3 text-center text-sm font-semibold text-gray-600">Status</th>
                                            <th class="px-4 py-3 text-center text-sm font-semibold text-gray-600">Terdaftar</th>
                                            <th class="px-4 py-3 text-center text-sm font-semibold text-gray-600">Aksi</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tableUsers"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Modals Container -->
    <div id="modalContainer"></div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 z-[60] hidden items-center justify-center bg-white/90">
        <div class="text-center">
            <div class="w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
            <p class="text-gray-600 font-medium">Memproses...</p>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="fixed bottom-4 right-4 z-[70] hidden">
        <div id="toastContent" class="px-6 py-4 rounded-xl shadow-lg flex items-center space-x-3">
            <i id="toastIcon" class="fas text-xl"></i>
            <span id="toastMessage" class="font-medium"></span>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-storage-compat.js"></script>

    <!-- App Scripts -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/hari-libur.js"></script>
    <script src="js/kurikulum-data.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/profil.js"></script>
    <script src="js/kalender.js"></script>
    <script src="js/jadwal.js"></script>
    <script src="js/siswa.js"></script>
    <script src="js/atp.js"></script>
    <script src="js/prota-promes.js"></script>
    <script src="js/modul-ajar.js"></script>
    <script src="js/absensi.js"></script>
    <script src="js/jurnal.js"></script>
    <script src="js/nilai.js"></script>
    <script src="js/lkpd.js"></script>
    <script src="js/bank-soal.js"></script>
    <script src="js/ai-assistant.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/app.js"></script>
</body>
</html>

